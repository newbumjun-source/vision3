{
  "rules": [
    {
      "type": "prd",
      "content": "# Vision3 – AI 기반 유튜브 썸네일·제목 자동 생성 SaaS PRD\n\n## 1. 제품 개요\n대화형 챗 인터페이스 하나로 고CTR 유튜브 썸네일과 제목을 3분 내 자동 제작·후처리해 주는 멀티모달 SaaS.\n\n## 2. 문제 정의\n• 개인 크리에이터 다수는 Canva 등 수동 디자인 툴을 사용해 썸네일을 만들며 디자인 역량·시간 부족으로 CTR 손실 발생.\n• 프롬프트 기반 AI 서비스는 복잡하고 결과 품질이 불안정함.\n\n## 3. 핵심 가치 제안\n1) 자연어 대화만으로 전문가 수준 썸네일·제목 완성  \n2) 클릭률 최적화 로직이 숨겨져 있어 사용자는 ‘디자인 결정’ 스트레스 無  \n3) 3분 내 결과물 제공으로 업로드 일정 가속화\n\n## 4. 목표 사용자\n• 개인 유튜브 크리에이터  \n• 우선 타겟: ① 틈새 교육·지식 채널 ② 데일리 게이밍 채널 ③ 라이프스타일·엔터테인먼트 채널\n\n## 5. 주요 사용 시나리오\n새 영상 업로드 전, 챗으로 썸네일·제목을 빠르게 완성하고 즉시 게시.\n\n## 6. 사용자 최종 목표\n썸네일·제목 덕분에 영상 CTR을 높여 조회수를 늘린다.\n\n## 7. 핵심 기능 (MVP)\n1. 대화형 썸네일 생성 – Gemini Pro 기반 챗 UI\n2. 자동 제목 생성 – 동일 대화 맥락에서 5개 후보 제안  \n3. 다운로드/복사 & 사이즈 최적화 – 1280×720, 1920×1080, 1080x1920 선택  \n\n## 8. 제외 범위 (MVP)\n• 팀 협업, 풀 분석 대시보드, 템플릿 마켓플레이스, 다중 플랫폼(TikTok) 지원\n\n## 9. 성공 지표 (KPIs)\n• 평균 CTR 상승률 ≥ 15 %  \n• 썸네일 생성→채택 비율 ≥ 50 %  \n• 30일 재사용률 ≥ 40 %  \n• 최초 유료 전환율 ≥ 8 %\n\n## 10. 기능 요구 사항\nFR-01 사용자는 채팅으로 영상 주제·톤·희망 스타일을 입력할 수 있다.     \nFR-01 모든 프롬프트·내부 디자인 로직은 사용자에게 노출되지 않는다.\n\n## 11. 비기능 요구 사항  \n• 플랫폼: 반응형 웹(모바일 최적화)  \n• 보안: Supabase ‑ Row Level Security, OAuth(Clerk)  \n• 가용성: 99.5 % 이상  \n• 개인정보: 채팅 내용 30일 후 자동 익명화\n\n## 12. 기술 스택\nNext.js 15, TypeScript, Supabase, Clerk, @tanstack/react-query, shadcn UI, lucide-react, LemonSqueezy(결제)\n\n## 13. 가격 정책 (런칭) \n• Starter $9/mo – 썸네일 약10개 생성·2k 다운로드  \n• Pro $29/mo – 썸네일 약30개 생성·2k, 4K 다운로드, 제목 생성 기능, 후처리 기능 제공\n• Expert $49/mo – \n\n## 14. 위험 & 대응\n• Canva 모방 → 6개월 내 Chat UX 리더십 확보  \n• AI 품질 부족 → 베타 테스터 50인 피드백 라운드 2회  \n• API 비용 증가 → 볼륨딜 협상·캐싱 전략\n\n\n## 16. 승인\nPM: ______  CTO: ______  날짜: ______",
      "writedAt": "2026-01-02T11:36:29.745Z"
    },
    {
      "type": "architecture",
      "content": "Excellent. As a senior technical architect, my focus is on creating a blueprint for execution, not a rigid prescription. This refined TRD eliminates premature specifics like directory structures and focuses on the architectural decisions, data flow, and core logic necessary to build the Vision3 MVP.\n\nThis document is the actionable technical counterpart to the PRD.\n\n---\n\n# **Refined Technical Requirements Document (TRD) - Vision3 MVP**\n\n## 1. Guiding Principles\n\n-   **Serverless-First:** Leverage managed services (Vercel, Supabase, Gemini) to minimize infrastructure overhead and maximize development velocity.\n-   **Pragmatic & Lean:** The architecture must directly serve the MVP features. Avoid premature optimization or complexity.\n-   **Asynchronous Core:** The primary AI generation flow is time-intensive. The system must be designed asynchronously to provide a responsive user experience.\n\n## 2. Core Technology Stack\n\n-   **Frontend:** Next.js 15 (App Router), TypeScript, React Query, shadcn/ui\n-   **Authentication:** Clerk (Managed, JWT-based)\n-   **Backend & API:** Next.js API Routes / Vercel Serverless Functions\n-   **Database:** Supabase (Postgres with Row Level Security)\n-   **AI Services:** Google Gemini Pro (for orchestrating concepts and text) & a supporting Image Generation Model API (e.g., Stable Diffusion API, DALL-E 3).\n-   **Payments:** LemonSqueezy (via Webhooks)\n\n## 3. High-Level System Architecture\n\nThe system operates on a simple, decoupled client-server model. The frontend is a SPA responsible for UI, while the backend handles business logic, database interaction, and AI orchestration.\n\n```\n+----------------+      +------------------+      +-------------------+\n|   User Browser |----->|   Clerk (Auth)   |----->| Next.js Frontend  |\n| (Next.js App)  |      +------------------+      | (Vercel)          |\n+----------------+                                +---------+---------+\n                                                            | (API Calls w/ JWT)\n                                                            v\n+-----------------------------------------------------------+----------------------------------------------------------+\n|                                           Backend Logic (Vercel Serverless Functions)                                |\n|                                                                                                                        |\n| +-------------------------+      +--------------------------+      +---------------------+     +--------------------+ |\n| |   API Endpoint Handlers |----->| AI Generation Orchestrator |----->|  Gemini Pro API     |---->| Image Gen API      | |\n| | (e.g., /api/generate)   |      | (Async Task)             |      | (Concepts, Titles)  |     | (Visuals)        | |\n| +-------------------------+      +--------------------------+      +---------------------+     +--------------------+ |\n|            |                                   |                                                                     |\n|            | (CRUD Operations)                 | (Store Results)                                                     |\n|            v                                   v                                                                     |\n| +-------------------------------------------------+                                                                  |\n| |               Supabase (Postgres DB)            |                                                                  |\n| | (Data Storage, RLS, File Storage for Images)    |                                                                  |\n| +-------------------------------------------------+                                                                  |\n+----------------------------------------------------------------------------------------------------------------------+\n```\n\n## 4. Data Model (Core Supabase Schema)\n\nThis schema is the minimum required for MVP functionality. All tables will be protected by RLS policies.\n\n-   **`users`**\n    -   `id`: `uuid` (Primary Key, references `auth.users`)\n    -   `clerk_id`: `text` (Unique, from Clerk)\n    -   `email`: `text`\n    -   `subscription_tier`: `text` (e.g., 'free', 'starter', 'pro')\n    -   `credits_remaining`: `integer`\n    -   `created_at`: `timestamp`\n\n-   **`generations`**\n    -   `id`: `uuid` (Primary Key)\n    -   `user_id`: `uuid` (Foreign Key to `users.id`)\n    -   `type`: `text` (Enum: 'THUMBNAIL', 'TITLE')\n    -   `status`: `text` (Enum: 'PENDING', 'COMPLETED', 'FAILED')\n    -   `user_prompt`: `text` (The user's initial input)\n    -   `created_at`: `timestamp`\n\n-   **`artifacts`**\n    -   `id`: `uuid` (Primary Key)\n    -   `generation_id`: `uuid` (Foreign Key to `generations.id`)\n    -   `type`: `text` (Enum: 'IMAGE', 'TEXT')\n    -   `content`: `text` (For titles, this is the text. For images, this is the URL from Supabase Storage.)\n    -   `metadata`: `jsonb` (Optional: e.g., resolution, edit history)\n    -   `created_at`: `timestamp`\n\n## 5. Core User Flows & API Design\n\n### Flow 1: Thumbnail & Title Generation (Asynchronous)\n\n1.  **Client-Side:** User types a prompt in the chat UI and submits. The client makes an API call and enters a \"loading\" state.\n    -   `POST /api/generations`\n    -   **Body:** `{ \"prompt\": \"a video about making sourdough bread\", \"type\": \"THUMBNAIL\" }`\n\n2.  **Backend (Immediate Response):**\n    -   The API endpoint validates the user's JWT and checks their generation credits.\n    -   It creates a new record in the `generations` table with `status: 'PENDING'`.\n    -   It immediately returns the `generation_id` to the client with a `202 Accepted` status.\n    -   Simultaneously, it triggers a background serverless function, passing the `generation_id`.\n\n3.  **Backend (Background Task):**\n    -   The serverless function fetches the `generation` details.\n    -   **Step A (Orchestration):** It constructs a detailed system prompt and calls the Gemini Pro API to generate 3-5 distinct thumbnail concepts (descriptions, text, mood) and 5 title strings.\n    -   **Step B (Image Creation):** For each thumbnail concept, it calls the Image Generation API.\n    -   **Step C (Storage):** It uploads the resulting images to Supabase Storage.\n    -   **Step D (DB Update):** It creates new records in the `artifacts` table for each generated image URL and title.\n    -   Finally, it updates the original `generations` record `status` to `'COMPLETED'`.\n\n4.  **Client-Side (Polling):**\n    -   Using React Query, the client polls a status endpoint every 5-10 seconds.\n    -   `GET /api/generations/[generation_id]`\n    -   Once the status is `'COMPLETED'`, the client fetches the results (artifacts) and displays them.\n\n### Flow 2: Simple Edit\n\n1.  **Client-Side:** User clicks an edit button on a generated thumbnail and changes the text.\n    -   `POST /api/artifacts/[artifact_id]/edit`\n    -   **Body:** `{ \"action\": \"REPLACE_TEXT\", \"new_text\": \"Easy Sourdough!\" }`\n2.  **Backend:**\n    -   This can be a synchronous, faster operation.\n    -   A serverless function loads the base image, applies the text overlay change, and saves a new version to Supabase Storage.\n    -   Returns the URL of the new artifact.\n\n## 6. Authentication & Authorization\n\n-   **Authentication:** Clerk will manage all user sign-up, sign-in, and session management. The frontend will be wrapped in Clerk's provider.\n-   **Authorization:**\n    -   All API requests from the client to the backend must include a short-lived JWT generated by Clerk.\n    -   A backend middleware will verify the JWT on every protected endpoint.\n    -   **Database Security:** Supabase Row Level Security (RLS) will be enabled on all tables. Policies will ensure users can only access their own data.\n        -   *Example RLS Policy on `generations` table:* `(auth.uid() = user_id)`\n\n## 7. Implementation of Key Non-Functional Requirements\n\n-   **Response Time (< 3 min):** This applies to the end-to-end generation process. It is achieved via the asynchronous architecture described in Flow 1. The user receives an immediate UI response while the heavy lifting happens in the background.\n-   **Availability (99.5%):** Achieved by relying on the high-availability infrastructure of Vercel and Supabase. No self-managed servers are required.\n-   **Security:** Handled by Clerk's robust authentication and Supabase RLS policies at the database level.\n-   **Data Privacy (Anonymization):** A scheduled cron job (e.g., Supabase `pg_cron`) will execute a SQL script weekly to find `generations` older than 30 days and anonymize associated user data as required by the PRD.",
      "writedAt": "2026-01-02T11:36:29.745Z"
    },
    {
      "type": "guideline",
      "content": "\n  \n  ## Library\n  - **Packages**: `@myapp/api`, `@myapp/ui`, `@myapp/prisma`, `@myapp/utils`\n  - **Boundaries**: `apps/* -> packages/*` only; no cross-app imports; no cycles\n  - **Imports**: Package entrypoints only (no deep internal paths)\n  - **Env**: Server-only secrets on server; never expose in client\n  \n  ## Directory Structure\n  - **Monorepo**: `apps/app`, `apps/www`, `packages/*`, `tooling/*`\n  - **App (dashboard)**: `apps/app/src/{app,components,features,hooks,i18n,utils}`\n  - **Landing**: `apps/www/app`, `apps/www/src/{components,i18n}`\n  - **API**: `packages/api/src/{trpc.ts,root.ts,routers/*}`\n  - **DB**: `packages/prisma/prisma/*`, `packages/prisma/generated/prisma`\n  - **UI**: `packages/ui/src/{components,lib/utils.ts,index.ts}`\n  \n  ## Code Guidelines\n  - **Feature-first**: `apps/app/src/features/[feature]/*` (UI + logic)\n  - **Validation**: `zod` at API boundaries; reuse on client\n  - **tRPC**: Router per domain; export via `root.ts`; typed client in app\n  - **i18n**: `apps/app/messages`, `apps/www/src/i18n/locales`\n  - **Side-effects**: Server-only in API/tRPC; wrap external calls\n  \n  ## Code-Style Guidelines\n  - **TypeScript**: strict; prefer `type`; use `unknown` over `any`\n  - **Naming**: PascalCase components; camelCase vars; kebab-case dirs\n  - **Files**: One component per file; colocate tests/stories if any\n  - **Imports**: node/3p -> packages -> relative; no deep UI imports\n  - **React**: Server Components by default; `use client` only when needed; avoid default exports\n  - **Styling**: Tailwind; compose with `cn` from `@myapp/ui/lib/utils`\n  - **Format/Lint**: Prettier + ESLint from `tooling/eslint-config`\n  \n  ## Error Handling\n  - **Validate early**: `zod` parse → typed inputs\n  - **tRPC**: `TRPCError({ code, message, cause })`; map domain errors\n  - **HTTP**: `NextResponse.json({ error: { code, message } }, { status })`\n  - **UI feedback**: toasts/dialogs from `@myapp/ui`\n  - **Logging**: include context; never leak secrets\n  - **Never**: swallow errors or throw plain strings\n  \n  ## Prisma\n  - **Single source**: `packages/prisma/prisma/schema.prisma`\n  - **Flow**: edit → `pnpm db:migrate:create` → `pnpm db:generate`\n  - **Do NOT**: run `pnpm db:migrate:deploy` locally\n  - **Access**: use generated client (`@myapp/prisma`); no raw SQL\n  - **Transactions**: `prisma.$transaction`; handle unique/constraint errors\n  - **Types**: share DTOs via `zod` and `@myapp/utils`\n  \n  ## Shadcn (UI)\n  - **Source**: `packages/ui` only; import via package entrypoints\n  - **Add**: in `packages/ui` → `pnpm dlx shadcn@canary add <component>`\n  - **Export**: re-export from `packages/ui/src/index.ts`\n  - **Utilities**: `cn` from `@myapp/ui/lib/utils`\n  - **Styling**: follow tokens; avoid inline styles; no deep imports\n    ",
      "writedAt": "2026-01-02T11:36:29.745Z"
    },
    {
      "type": "design-guide",
      "content": "# Vision3 Design Guide\n\n## 1. 전체적인 무드\n\nVision3는 AI 기반 유튜브 썸네일 및 제목 자동 생성 서비스로서, **혁신적이고 미래지향적인** 디자인 무드를 추구합니다. 복잡한 디자인 프로세스를 간단한 대화로 해결하는 서비스 특성에 맞춰, 사용자에게 **기술의 힘과 창의성**을 동시에 전달하는 시각적 경험을 제공합니다.\n\n핵심 디자인 철학:\n- **직관적 단순함**: 복잡한 AI 기술을 감추고 자연스러운 대화형 인터페이스 제공\n- **창의적 에너지**: 크리에이터의 창작 욕구를 자극하는 역동적 시각 요소\n- **신뢰할 수 있는 전문성**: 3분 내 전문가 수준 결과물을 보장하는 안정감\n- **개성 있는 브랜딩**: 경쟁 서비스와 차별화되는 독특한 시각적 아이덴티티\n\n## 2. 참조 서비스\n\n- **Name**: Linear\n- **Description**: 현대적이고 미니멀한 프로젝트 관리 도구\n- **Design Mood**: 다크 테마 기반의 세련되고 전문적인 인터페이스, 네온 액센트 컬러로 포인트를 주는 미래지향적 디자인\n- **Primary Color**: #0E1117\n- **Secondary Color**: #B0FF2D\n\n## 3. 색상 & 그라데이션\n\n### 주요 색상 팔레트\n- **Primary Color**: #0E1117 (Deep Dark Navy)\n- **Secondary Color**: #B0FF2D (Electric Lime)\n- **Background Colors**: \n  - Main: #0E1117\n  - Card: #1A1D23\n  - Elevated: #252932\n- **Text Colors**:\n  - Primary: #F5F7FA\n  - Secondary: #9CA3AF\n  - Muted: #6B7280\n- **Accent Colors**:\n  - Success: #10B981\n  - Warning: #F59E0B\n  - Error: #EF4444\n  - Info: #3B82F6\n\n### 무드 & 사용법\n- **Mood**: Cool tone, High contrast, Futuristic\n- **Color Usage**: \n  1. **Primary (#0E1117)**: 배경, 주요 컨테이너\n  2. **Secondary (#B0FF2D)**: CTA 버튼, 활성 상태, 중요 액션\n  3. **Text (#F5F7FA)**: 주요 텍스트, 제목\n  4. **Cards (#1A1D23)**: 콘텐츠 카드, 입력 필드\n  5. **Accents**: 상태 표시, 피드백, 보조 액션\n\n## 4. 타이포그래피 & 폰트\n\n### 폰트 시스템\n- **Primary Font**: Inter (System fallback: -apple-system, BlinkMacSystemFont, \"Segoe UI\")\n- **Display Font**: Satoshi (Headlines and branding)\n\n### 타이포그래피 스케일\n- **Heading 1**: Satoshi Bold, 48px, 1.1 line-height, -0.02em letter-spacing\n- **Heading 2**: Satoshi Bold, 36px, 1.2 line-height, -0.015em letter-spacing\n- **Heading 3**: Satoshi SemiBold, 24px, 1.3 line-height, -0.01em letter-spacing\n- **Body Large**: Inter Medium, 18px, 1.5 line-height, 0em letter-spacing\n- **Body**: Inter Regular, 16px, 1.5 line-height, 0em letter-spacing\n- **Body Small**: Inter Regular, 14px, 1.4 line-height, 0.005em letter-spacing\n- **Caption**: Inter Medium, 12px, 1.3 line-height, 0.01em letter-spacing\n\n## 5. 레이아웃 & 구조\n\n### 그리드 시스템\n- **Container Max Width**: 1280px\n- **Grid Columns**: 12 columns\n- **Gutter**: 24px\n- **Margins**: \n  - Desktop: 80px\n  - Tablet: 40px\n  - Mobile: 20px\n\n### 레이아웃 원칙\n- **Top Navigation**: 고정형 상단 네비게이션 바 (72px height)\n- **Main Content**: 중앙 정렬, 최대 너비 제한\n- **Chat Interface**: 전체 화면 활용, 좌우 여백 최소화\n- **Cards**: 8px border-radius, subtle shadow\n- **Spacing System**: 4px 기준 (4, 8, 12, 16, 24, 32, 48, 64, 80px)\n\n## 6. 비주얼 스타일\n\n### 아이콘\n- **Style**: Lucide React 기반 outline 스타일\n- **Size**: 16px, 20px, 24px, 32px\n- **Weight**: 1.5px stroke-width\n- **Color**: 컨텍스트에 따라 text colors 적용\n\n### 이미지 & 일러스트레이션\n- **Style**: 추상적 그라데이션 형태, 기하학적 패턴\n- **Color Scheme**: Primary와 Secondary 색상 기반 그라데이션\n- **Usage**: 로딩 상태, 빈 상태, 온보딩 일러스트레이션\n\n### 로고\n- **Style**: 미니멀한 워드마크, 각진 컷 디테일\n- **Color**: Primary (#F5F7FA) 또는 Secondary (#B0FF2D)\n- **Size**: 32px height (navigation), 48px height (landing)\n\n## 7. UX 가이드\n\n### 사용자 경험 전략\nVision3는 **전문가와 초보자가 혼재된** 크리에이터 사용자층을 대상으로 하므로 **듀얼 모드 UX**를 적용합니다.\n\n### 핵심 UX 원칙\n1. **Progressive Disclosure**: 복잡한 기능은 단계적으로 노출\n2. **Conversational Flow**: 자연스러운 대화 흐름 유지\n3. **Immediate Feedback**: 모든 액션에 즉각적인 피드백 제공\n4. **Error Prevention**: 사용자 실수를 미연에 방지하는 가이드 제공\n\n### 사용자별 경험 설계\n- **초보자**: 온보딩 가이드, 예시 프롬프트, 자동 추천\n- **숙련자**: 빠른 액세스, 고급 편집 옵션, 배치 작업\n- **공통**: 직관적인 채팅 인터페이스, 실시간 미리보기\n\n## 8. UI 컴포넌트 가이드\n\n### 버튼\n- **Primary Button**: \n  - Background: #B0FF2D\n  - Text: #0E1117\n  - Padding: 12px 24px\n  - Border-radius: 8px\n  - Font: Inter Medium 16px\n  - Hover: 5% darker, subtle glow effect\n\n- **Secondary Button**:\n  - Background: transparent\n  - Border: 1px solid #374151\n  - Text: #F5F7FA\n  - Padding: 12px 24px\n  - Border-radius: 8px\n  - Hover: border color to #B0FF2D\n\n### 입력 필드\n- **Background**: #1A1D23\n- **Border**: 1px solid #374151\n- **Border-radius**: 8px\n- **Padding**: 12px 16px\n- **Font**: Inter Regular 16px\n- **Placeholder**: #6B7280\n- **Focus**: border color to #B0FF2D, subtle glow\n\n### 카드\n- **Background**: #1A1D23\n- **Border**: 1px solid #374151\n- **Border-radius**: 12px\n- **Padding**: 24px\n- **Shadow**: 0 4px 6px rgba(0, 0, 0, 0.1)\n- **Hover**: subtle scale (1.02), border color to #4B5563\n\n### 네비게이션 바\n- **Background**: #0E1117\n- **Height**: 72px\n- **Border-bottom**: 1px solid #1F2937\n- **Backdrop-blur**: 10px\n- **Position**: sticky top\n\n### 채팅 인터페이스\n- **Message Bubble (User)**: \n  - Background: #B0FF2D\n  - Text: #0E1117\n  - Border-radius: 18px 18px 4px 18px\n  - Max-width: 80%\n\n- **Message Bubble (AI)**:\n  - Background: #1A1D23\n  - Text: #F5F7FA\n  - Border-radius: 18px 18px 18px 4px\n  - Max-width: 80%\n\n### 로딩 상태\n- **Spinner**: #B0FF2D 색상의 rotating border\n- **Skeleton**: #1A1D23 배경에 #252932 shimmer effect\n- **Progress Bar**: #B0FF2D fill with animated gradient\n\n### 마이크로 인터랙션\n- **Hover Effects**: subtle scale (1.02-1.05), opacity changes\n- **Click Effects**: brief scale down (0.98), then return\n- **Loading**: pulsing glow effect on active elements\n- **Transitions**: 200ms ease-out for most interactions\n\n### 접근성 고려사항\n- **Contrast Ratio**: WCAG AA 준수 (#B0FF2D vs #0E1117 = 4.5:1 이상)\n- **Focus States**: 모든 interactive 요소에 명확한 focus indicator\n- **Screen Reader**: semantic HTML과 적절한 ARIA labels\n- **Keyboard Navigation**: Tab order와 keyboard shortcuts 지원",
      "writedAt": "2026-01-02T11:36:29.745Z"
    },
    {
      "type": "ia",
      "content": "# Vision3 정보 아키텍처 (IA)\n\n## 1. 사이트맵 (사이트맵)\n\n```\nVision3 (/)\n├── 랜딩 페이지 (/)\n├── 인증 (/auth)\n│   ├── 로그인 (/auth/login)\n│   ├── 회원가입 (/auth/signup)\n│   └── 비밀번호 재설정 (/auth/reset-password)\n├── 대시보드 (/dashboard) [인증 필요]\n│   ├── 개요 (/dashboard)\n│   ├── 최근 생성물 (/dashboard/recent)\n│   └── 사용량 통계 (/dashboard/analytics)\n├── 채팅 생성 (/generate) [인증 필요]\n│   ├── 새 대화 (/generate)\n│   └── 대화 기록 (/generate/:conversationId)\n├── 라이브러리 (/library) [인증 필요]\n│   ├── 내 썸네일 (/library/thumbnails)\n│   ├── 내 제목 (/library/titles)\n│   ├── 즐겨찾기 (/library/favorites)\n│   └── 스타일 프리셋 (/library/presets)\n├── 요금제 (/pricing)\n│   ├── 플랜 비교 (/pricing)\n│   └── 결제 완료 (/pricing/success)\n├── 계정 관리 (/account) [인증 필요]\n│   ├── 프로필 설정 (/account/profile)\n│   ├── 구독 관리 (/account/subscription)\n│   ├── 결제 내역 (/account/billing)\n│   └── 계정 설정 (/account/settings)\n├── 고객 지원 (/support)\n│   ├── 도움말 센터 (/support/help)\n│   ├── 문의하기 (/support/contact)\n│   └── FAQ (/support/faq)\n└── 오류 페이지\n    ├── 404 페이지 (/404)\n    └── 500 페이지 (/500)\n```\n\n## 2. 사용자 흐름 (사용자 흐름)\n\n### **핵심 작업: 썸네일 생성 및 다운로드**\n1. 사용자가 랜딩 페이지에서 \"시작하기\" 클릭\n2. 회원가입/로그인 페이지로 이동\n3. OAuth(Google) 인증 완료\n4. 온보딩 모달에서 서비스 소개 확인\n5. 대시보드로 리다이렉트\n6. \"새 썸네일 생성\" 버튼 클릭하여 채팅 페이지 이동\n7. 챗봇과 대화를 통해 영상 정보 입력\n8. AI가 썸네일 생성\n9. 원하는 썸네일 선택\n10. PNG 다운로드 또는 클립보드 복사\n11. 라이브러리에 자동 저장\n\n### **핵심 작업: 구독 업그레이드**\n1. 사용량 한계 도달 시 알림 표시\n2. \"업그레이드\" 버튼 클릭\n3. 요금제 페이지로 이동\n4. 플랜 비교 및 선택\n5. LemonSqueezy 결제 페이지로 이동\n6. 결제 정보 입력 및 완료\n7. 결제 성공 페이지 표시\n8. 계정 관리 페이지로 리다이렉트\n\n### **핵심 작업: 라이브러리 관리**\n1. 사이드바에서 \"라이브러리\" 클릭\n2. 탭을 통해 썸네일/제목/즐겨찾기 전환\n3. 필터 및 검색으로 콘텐츠 탐색\n4. 썸네일 호버 시 미리보기 표시\n5. 우클릭 메뉴로 삭제/즐겨찾기/복사 액션\n6. 스타일 프리셋 저장 및 재사용\n\n## 3. 네비게이션 구조 (네비게이션 구조)\n\n### **상단 네비게이션 바 (GNB)**\n- **로고**: Vision3 워드마크 (홈으로 이동)\n- **주요 메뉴**: \n  - 요금제 (/pricing)\n  - 도움말 (/support/help)\n- **사용자 영역**: \n  - 로그인 전: 로그인/회원가입 버튼\n  - 로그인 후: 사용량 표시, 프로필 드롭다운\n\n### **사이드바 네비게이션 (LNB)** [인증된 사용자만]\n- **주요 섹션**:\n  - 대시보드 (홈 아이콘)\n  - 새 생성 (플러스 아이콘)\n  - 라이브러리 (폴더 아이콘)\n- **계정 섹션**:\n  - 내 계정 (사용자 아이콘)\n  - 설정 (톱니바퀴 아이콘)\n  - 로그아웃\n\n### **푸터 네비게이션**\n- **회사 정보**: 서비스 소개, 팀 소개\n- **지원**: FAQ, 문의하기, 커뮤니티\n- **법적 고지**: 이용약관, 개인정보처리방침\n- **소셜 링크**: Twitter, YouTube, Discord\n\n## 4. 페이지 계층 구조 (페이지 계층 구조)\n\n```\n/ (Depth 1 - 공개)\n/auth (Depth 1 - 공개)\n  /auth/login (Depth 2 - 공개)\n  /auth/signup (Depth 2 - 공개)\n  /auth/reset-password (Depth 2 - 공개)\n/pricing (Depth 1 - 공개)\n  /pricing/success (Depth 2 - 인증 필요)\n/support (Depth 1 - 공개)\n  /support/help (Depth 2 - 공개)\n  /support/contact (Depth 2 - 공개)\n  /support/faq (Depth 2 - 공개)\n/dashboard (Depth 1 - 인증 필요)\n  /dashboard/recent (Depth 2 - 인증 필요)\n  /dashboard/analytics (Depth 2 - 인증 필요)\n/generate (Depth 1 - 인증 필요)\n  /generate/:conversationId (Depth 2 - 인증 필요)\n/library (Depth 1 - 인증 필요)\n  /library/thumbnails (Depth 2 - 인증 필요)\n  /library/titles (Depth 2 - 인증 필요)\n  /library/favorites (Depth 2 - 인증 필요)\n  /library/presets (Depth 2 - 인증 필요)\n/account (Depth 1 - 인증 필요)\n  /account/profile (Depth 2 - 인증 필요)\n  /account/subscription (Depth 2 - 인증 필요)\n  /account/billing (Depth 2 - 인증 필요)\n  /account/settings (Depth 2 - 인증 필요)\n```\n\n## 5. 콘텐츠 구성 (콘텐츠 구성)\n\n| 페이지 | 주요 콘텐츠 요소 |\n|--------|------------------|\n| 랜딩 페이지 | 히어로 섹션, 기능 소개, 데모 영상, 요금제 미리보기, CTA 버튼, 고객 후기 |\n| 대시보드 | 사용량 위젯, 최근 생성물 그리드, 퀵 액션 버튼, 성과 차트, 알림 배너 |\n| 채팅 생성 | 대화 인터페이스, 입력 필드, 생성 결과 갤러리, 편집 툴바, 다운로드 옵션 |\n| 라이브러리 | 필터 탭, 검색바, 그리드 뷰/리스트 뷰, 썸네일 카드, 페이지네이션 |\n| 요금제 | 플랜 비교 테이블, 기능 체크리스트, FAQ 섹션, 결제 버튼 |\n| 계정 관리 | 프로필 폼, 구독 상태, 결제 내역 테이블, 설정 스위치 |\n| 로그인/회원가입 | OAuth 버튼, 이메일 폼, 약관 동의, 리다이렉트 링크 |\n\n## 6. 인터랙션 패턴 (인터랙션 패턴)\n\n### **모달 사용**\n- **온보딩 모달**: 첫 방문 시 서비스 소개 및 가이드\n- **편집 모달**: 썸네일 세부 편집 (텍스트, 컬러 변경)\n- **확인 모달**: 삭제, 로그아웃 등 중요 액션 확인\n- **업그레이드 모달**: 사용량 한계 도달 시 구독 유도\n\n### **툴팁 사용**\n- **기능 설명**: 복잡한 UI 요소에 도움말 제공\n- **단축키 안내**: 키보드 네비게이션 가이드\n- **상태 정보**: 생성 진행률, 사용량 현황\n\n### **드롭다운 메뉴**\n- **사용자 프로필**: 계정 관리, 설정, 로그아웃\n- **정렬 옵션**: 라이브러리 콘텐츠 정렬 방식\n- **액션 메뉴**: 우클릭 컨텍스트 메뉴\n\n### **인피니트 스크롤**\n- **라이브러리 그리드**: 썸네일/제목 목록 로딩\n- **대화 기록**: 채팅 히스토리 탐색\n\n### **드래그 앤 드롭**\n- **파일 업로드**: 영상 파일 또는 참조 이미지 업로드\n- **라이브러리 정렬**: 즐겨찾기 순서 변경\n\n## 7. URL 구조 (URL 구조)\n\n### **URL 네이밍 규칙**\n- **일반 리소스**: `/resource-name`\n- **상세 페이지**: `/resource-name/:id`\n- **중첩 리소스**: `/parent/child`\n- **액션 기반**: `/resource-name/action`\n\n### **구체적 URL 패턴**\n```\n/ - 랜딩 페이지\n/auth/login - 로그인\n/auth/signup - 회원가입\n/dashboard - 대시보드 홈\n/generate - 새 대화 시작\n/generate/conv_abc123 - 특정 대화\n/library/thumbnails - 썸네일 라이브러리\n/library/favorites - 즐겨찾기\n/account/profile - 프로필 설정\n/account/subscription - 구독 관리\n/pricing - 요금제\n/support/faq - FAQ\n```\n\n### **SEO 최적화**\n- **의미 있는 URL**: 사용자가 이해하기 쉬운 경로명\n- **하이픈 사용**: 단어 구분자로 하이픈(-) 사용\n- **소문자 통일**: 모든 URL을 소문자로 통일\n- **슬래시 정규화**: 끝나는 슬래시 통일성 유지\n\n## 8. 컴포넌트 계층 구조 (컴포넌트 계층 구조)\n\n### **글로벌 컴포넌트**\n- **AppLayout**: 전체 레이아웃 래퍼\n- **TopNavigation**: 상단 네비게이션 바\n- **Sidebar**: 사이드바 네비게이션\n- **Footer**: 푸터 섹션\n- **AuthGuard**: 인증 상태 확인 래퍼\n- **LoadingSpinner**: 전역 로딩 인디케이터\n- **Toast**: 알림 메시지 시스템\n\n### **페이지별 주요 컴포넌트**\n\n#### **랜딩 페이지**\n- **HeroSection**: 메인 히어로 영역\n- **FeatureGrid**: 기능 소개 그리드\n- **DemoVideo**: 데모 영상 플레이어\n- **PricingPreview**: 요금제 미리보기\n- **TestimonialCarousel**: 고객 후기 슬라이더\n\n#### **대시보드**\n- **StatsWidget**: 사용량 통계 위젯\n- **RecentGrid**: 최근 생성물 그리드\n- **QuickActions**: 빠른 액션 버튼들\n- **UsageChart**: 사용량 차트\n- **NotificationBanner**: 알림 배너\n\n#### **채팅 생성**\n- **ChatInterface**: 대화 인터페이스\n- **MessageBubble**: 메시지 버블\n- **InputField**: 메시지 입력 필드\n- **GenerationResults**: 생성 결과 갤러리\n- **ThumbnailCard**: 썸네일 카드\n- **EditModal**: 편집 모달\n- **DownloadOptions**: 다운로드 옵션\n\n#### **라이브러리**\n- **FilterTabs**: 필터 탭 네비게이션\n- **SearchBar**: 검색 입력 필드\n- **ViewToggle**: 그리드/리스트 뷰 토글\n- **ContentGrid**: 콘텐츠 그리드\n- **ThumbnailPreview**: 썸네일 미리보기\n- **ContextMenu**: 우클릭 메뉴\n- **Pagination**: 페이지네이션\n\n#### **계정 관리**\n- **ProfileForm**: 프로필 편집 폼\n- **SubscriptionCard**: 구독 상태 카드\n- **BillingHistory**: 결제 내역 테이블\n- **SettingsPanel**: 설정 패널\n- **PlanUpgrade**: 플랜 업그레이드 섹션\n\n### **공통 UI 컴포넌트**\n- **Button**: 다양한 스타일의 버튼\n- **Input**: 입력 필드\n- **Modal**: 모달 다이얼로그\n- **Tooltip**: 툴팁\n- **Dropdown**: 드롭다운 메뉴\n- **Card**: 콘텐츠 카드\n- **Badge**: 상태 배지\n- **Avatar**: 사용자 아바타\n- **Progress**: 진행률 표시\n- **Skeleton**: 로딩 스켈레톤\n\n### **상태 관리 구조**\n- **AuthStore**: 사용자 인증 상태\n- **GenerationStore**: 생성 과정 및 결과\n- **LibraryStore**: 라이브러리 콘텐츠\n- **SubscriptionStore**: 구독 및 사용량 정보\n- **UIStore**: 전역 UI 상태 (모달, 토스트 등)\n\n이 정보 아키텍처는 Vision3의 사용자 중심적 설계를 반영하여, 크리에이터들이 직관적이고 효율적으로 서비스를 이용할 수 있도록 구성되었습니다. 대화형 AI 인터페이스를 중심으로 한 독특한 사용자 경험과 체계적인 콘텐츠 관리 시스템을 제공합니다.",
      "writedAt": "2026-01-02T11:36:29.745Z"
    },
    {
      "type": "step-by-step",
      "content": "\n## Core Directive\nYou are a senior software engineer AI assistant. For EVERY task request, you MUST follow the three-phase process below in exact order. Each phase must be completed with expert-level precision and detail.\n\n## Guiding Principles\n- **Minimalistic Approach**: Implement high-quality, clean solutions while avoiding unnecessary complexity\n- **Expert-Level Standards**: Every output must meet professional software engineering standards\n- **Concrete Results**: Provide specific, actionable details at each step\n\n---\n\n## Phase 1: Codebase Exploration & Analysis\n**REQUIRED ACTIONS:**\n1. **Systematic File Discovery**\n   - List ALL potentially relevant files, directories, and modules\n   - Search for related keywords, functions, classes, and patterns\n   - Examine each identified file thoroughly\n\n2. **Convention & Style Analysis**\n   - Document coding conventions (naming, formatting, architecture patterns)\n   - Identify existing code style guidelines\n   - Note framework/library usage patterns\n   - Catalog error handling approaches\n\n**OUTPUT FORMAT:**\n```\n### Codebase Analysis Results\n**Relevant Files Found:**\n- [file_path]: [brief description of relevance]\n\n**Code Conventions Identified:**\n- Naming: [convention details]\n- Architecture: [pattern details]\n- Styling: [format details]\n\n**Key Dependencies & Patterns:**\n- [library/framework]: [usage pattern]\n```\n\n---\n\n## Phase 2: Implementation Planning\n**REQUIRED ACTIONS:**\nBased on Phase 1 findings, create a detailed implementation roadmap.\n\n**OUTPUT FORMAT:**\n```markdown\n## Implementation Plan\n\n### Module: [Module Name]\n**Summary:** [1-2 sentence description of what needs to be implemented]\n\n**Tasks:**\n- [ ] [Specific implementation task]\n- [ ] [Specific implementation task]\n\n**Acceptance Criteria:**\n- [ ] [Measurable success criterion]\n- [ ] [Measurable success criterion]\n- [ ] [Performance/quality requirement]\n\n### Module: [Next Module Name]\n[Repeat structure above]\n```\n\n---\n\n## Phase 3: Implementation Execution\n**REQUIRED ACTIONS:**\n1. Implement each module following the plan from Phase 2\n2. Verify ALL acceptance criteria are met before proceeding\n3. Ensure code adheres to conventions identified in Phase 1\n\n**QUALITY GATES:**\n- [ ] All acceptance criteria validated\n- [ ] Code follows established conventions\n- [ ] Minimalistic approach maintained\n- [ ] Expert-level implementation standards met\n\n---\n\n## Success Validation\nBefore completing any task, confirm:\n- ✅ All three phases completed sequentially\n- ✅ Each phase output meets specified format requirements\n- ✅ Implementation satisfies all acceptance criteria\n- ✅ Code quality meets professional standards\n\n## Response Structure\nAlways structure your response as:\n1. **Phase 1 Results**: [Codebase analysis findings]\n2. **Phase 2 Plan**: [Implementation roadmap]  \n3. **Phase 3 Implementation**: [Actual code with validation]\n",
      "writedAt": "2026-01-02T11:36:29.745Z"
    },
    {
      "type": "clean-code",
      "content": "\n# Clean Code Guidelines\n\nYou are an expert software engineer focused on writing clean, maintainable code. Follow these principles rigorously:\n\n## Core Principles\n- **DRY** - Eliminate duplication ruthlessly\n- **KISS** - Simplest solution that works\n- **YAGNI** - Build only what's needed now\n- **SOLID** - Apply all five principles consistently\n- **Boy Scout Rule** - Leave code cleaner than found\n\n## Naming Conventions\n- Use **intention-revealing** names\n- Avoid abbreviations except well-known ones (e.g., URL, API)\n- Classes: **nouns**, Methods: **verbs**, Booleans: **is/has/can** prefix\n- Constants: UPPER_SNAKE_CASE\n- No magic numbers - use named constants\n\n## Functions & Methods\n- **Single Responsibility** - one reason to change\n- Maximum 20 lines (prefer under 10)\n- Maximum 3 parameters (use objects for more)\n- No side effects in pure functions\n- Early returns over nested conditions\n\n## Code Structure\n- **Cyclomatic complexity** < 10\n- Maximum nesting depth: 3 levels\n- Organize by feature, not by type\n- Dependencies point inward (Clean Architecture)\n- Interfaces over implementations\n\n## Comments & Documentation\n- Code should be self-documenting\n- Comments explain **why**, not what\n- Update comments with code changes\n- Delete commented-out code immediately\n- Document public APIs thoroughly\n\n## Error Handling\n- Fail fast with clear messages\n- Use exceptions over error codes\n- Handle errors at appropriate levels\n- Never catch generic exceptions\n- Log errors with context\n\n## Testing\n- **TDD** when possible\n- Test behavior, not implementation\n- One assertion per test\n- Descriptive test names: `should_X_when_Y`\n- **AAA pattern**: Arrange, Act, Assert\n- Maintain test coverage > 80%\n\n## Performance & Optimization\n- Profile before optimizing\n- Optimize algorithms before micro-optimizations\n- Cache expensive operations\n- Lazy load when appropriate\n- Avoid premature optimization\n\n## Security\n- Never trust user input\n- Sanitize all inputs\n- Use parameterized queries\n- Follow **principle of least privilege**\n- Keep dependencies updated\n- No secrets in code\n\n## Version Control\n- Atomic commits - one logical change\n- Imperative mood commit messages\n- Reference issue numbers\n- Branch names: `type/description`\n- Rebase feature branches before merging\n\n## Code Reviews\n- Review for correctness first\n- Check edge cases\n- Verify naming clarity\n- Ensure consistent style\n- Suggest improvements constructively\n\n## Refactoring Triggers\n- Duplicate code (Rule of Three)\n- Long methods/classes\n- Feature envy\n- Data clumps\n- Divergent change\n- Shotgun surgery\n\n## Final Checklist\nBefore committing, ensure:\n- [ ] All tests pass\n- [ ] No linting errors\n- [ ] No console logs\n- [ ] No commented code\n- [ ] No TODOs without tickets\n- [ ] Performance acceptable\n- [ ] Security considered\n- [ ] Documentation updated\n\nRemember: **Clean code reads like well-written prose**. Optimize for readability and maintainability over cleverness.\n",
      "writedAt": "2026-01-02T11:36:29.745Z"
    }
  ]
}